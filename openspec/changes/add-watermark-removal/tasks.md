# 实现任务清单

## 阶段一：基础架构

### 1. 服务层搭建
- [ ] 1.1 创建 `src/services/watermark/` 目录结构
- [ ] 1.2 定义类型文件 `types.ts`
- [ ] 1.3 实现平台识别工具 `src/utils/platform.ts`
- [ ] 1.4 实现下载工具 `src/utils/download.ts`

### 2. 存储服务
- [ ] 2.1 创建 `src/services/storage/records.ts`
- [ ] 2.2 实现历史记录的增删改查
- [ ] 2.3 实现本地存储管理（限制数量、清理等）

## 阶段二：URL 解析功能

### 3. URL 解析服务
- [ ] 3.1 实现解析服务入口 `services/watermark/parser.ts`
- [ ] 3.2 实现抖音解析器
- [ ] 3.3 实现快手解析器
- [ ] 3.4 实现小红书解析器
- [ ] 3.5 实现微博解析器
- [ ] 3.6 实现通用解析器（备用）

### 4. 服务端部署（可选）
- [ ] 4.1 创建 `server/` 目录结构
- [ ] 4.2 实现 Express/Koa 服务
- [ ] 4.3 实现解析 API 路由
- [ ] 4.4 部署到云服务器

## 阶段三：页面开发

### 5. 结果页面
- [ ] 5.1 创建 `pages/result/` 目录
- [ ] 5.2 实现结果页面组件
- [ ] 5.3 实现视频/图片预览
- [ ] 5.4 实现保存到相册功能
- [ ] 5.5 实现分享功能

### 6. 历史记录页面
- [ ] 6.1 创建 `pages/history/` 目录
- [ ] 6.2 实现历史记录列表
- [ ] 6.3 实现记录删除功能
- [ ] 6.4 实现记录详情查看

### 7. 组件开发
- [ ] 7.1 创建 URL 输入组件 `UrlInput`
- [ ] 7.2 创建处理中弹窗组件 `ProcessingModal`
- [ ] 7.3 创建结果卡片组件 `ResultCard`

## 阶段四：本地图片处理

### 8. 图片去水印
- [ ] 8.1 实现 Canvas 裁剪处理
- [ ] 8.2 实现水印区域选择 UI
- [ ] 8.3 实现图片预览和对比
- [ ] 8.4 （可选）接入服务端图像处理

## 阶段五：首页集成

### 9. 首页功能对接
- [ ] 9.1 对接"相册去水印"入口
- [ ] 9.2 对接"URL去水印"入口
- [ ] 9.3 对接"去水印记录"入口
- [ ] 9.4 优化 URL 输入交互

## 阶段六：测试验证

### 10. 功能测试
- [ ] 10.1 测试抖音链接解析
- [ ] 10.2 测试快手链接解析
- [ ] 10.3 测试小红书链接解析
- [ ] 10.4 测试本地图片处理
- [ ] 10.5 测试保存到相册
- [ ] 10.6 测试历史记录功能

### 11. 构建验证
- [ ] 11.1 运行构建命令验证
- [ ] 11.2 微信开发者工具预览
- [ ] 11.3 真机测试
